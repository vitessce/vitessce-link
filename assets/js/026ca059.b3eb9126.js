"use strict";(self.webpackChunkvitessce_Link=self.webpackChunkvitessce_Link||[]).push([[157],{7386:(e,t,a)=>{a.d(t,{S:()=>s});a(758);const o="vitessceAppLoadError_Jc3r";var i=a(6070);const s=e=>{let{errorMessage:t}=e;return t?(0,i.jsx)("div",{className:o,children:(0,i.jsx)("pre",{children:t})}):null}},2993:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var o=a(5292),i=a(758),s=a(6576),n=a(9842);const r="loadingOverlay_GhnI",l="spinner_i6P1";var d=a(6070);const c=e=>{let{isLoading:t}=e;return t?(0,d.jsx)("div",{className:r,children:(0,d.jsx)("div",{className:l})}):null};var p=a(2571),A=a(7386),f=a(4443),u=a(5191);const m=i.lazy((()=>Promise.all([a.e(869),a.e(406),a.e(782)]).then(a.bind(a,1401)).then((e=>({default:e.ConfigEditor})))));function h(){const e=(0,f.A)(),[t,a]=(0,i.useState)(null),[r,l]=(0,i.useState)(JSON.stringify(s.K3,null,2)),[h,y]=(0,i.useState)(null),[g,C]=(0,i.useState)(null),[S,I]=(0,i.useState)(null),{data:_,isValidating:v,isLoading:D,error:L}=(0,o.Ay)(g,n.GO);if(L&&a(L.message),_){const e=_?.layout.findIndex((e=>"linkController"===e.component));if(e>-1)try{_.layout[e].props.linkID=h||void 0;const t=`data:,${encodeURIComponent(JSON.stringify(_,null,2))}`,a=`${p.uK}${t}`;window.location.href=a}catch{I(p.UU.INVALID_CONFIG)}else I(p.UU.INVALID_CONFIG)}return D||v?(0,d.jsx)(c,{isLoading:D||v}):(0,d.jsxs)(u.A,{children:[S&&(0,d.jsx)(A.S,{errorMessage:S}),(0,d.jsx)(i.Suspense,{fallback:(0,d.jsx)(c,{isLoading:!0}),children:e&&(0,d.jsx)(m,{pendingJson:r,setPendingJson:l,serverError:t,setServerError:a,setUrl:function(e){C(e)},setLinkIdInput:y})})]})}},6576:(e,t,a)=>{a.d(t,{K3:()=>o,eD:()=>i,f8:()=>s});const o={version:"1.0.15",name:"My config",description:"Test",datasets:[],coordinationSpace:{},layout:[],initStrategy:"auto"},i={version:"1.0.16",name:"Vitessce Link Demo",description:"Test",datasets:[{uid:"A",name:"My dataset",files:[{fileType:"image.ome-tiff",url:"https://data-2.vitessce.io/data/redBloodCell.ome.tiff",options:{offsetsUrl:"https://data-2.vitessce.io/data/redBloodCell.offsets.json"},coordinationValues:{fileUid:"file"}}]}],coordinationSpace:{dataset:{A:"A"},spatialTargetZ:{A:0},spatialTargetT:{A:0},imageLayer:{A:"__dummy__"},fileUid:{A:"file"},spatialLayerOpacity:{A:1},photometricInterpretation:{A:"BlackIsZero"},spatialTargetResolution:{A:null},imageChannel:{A:"__dummy__"},spatialTargetC:{A:0},spatialChannelVisible:{A:!0},spatialChannelOpacity:{A:1},metaCoordinationScopes:{A:{spatialTargetZ:"A",spatialTargetT:"A",imageLayer:["A"]}},metaCoordinationScopesBy:{A:{imageLayer:{fileUid:{A:"A"},spatialLayerOpacity:{A:"A"},photometricInterpretation:{A:"A"},spatialTargetResolution:{A:"A"},imageChannel:{A:["A"]}},imageChannel:{spatialTargetC:{A:"A"},spatialChannelVisible:{A:"A"},spatialChannelOpacity:{A:"A"}}}}},layout:[{component:"spatialBeta",props:{three:!0},x:0,y:0,w:8,h:8,coordinationScopes:{dataset:"A",metaCoordinationScopes:["A"],metaCoordinationScopesBy:["A"]}},{component:"layerControllerBeta",x:8,y:0,w:4,h:6,coordinationScopes:{dataset:"A",metaCoordinationScopes:["A"],metaCoordinationScopesBy:["A"]}},{component:"linkController",props:{linkID:1234,send:!0,receive:!0},x:8,y:1,w:4,h:2,coordinationScopes:{dataset:"A",metaCoordinationScopes:["A"],metaCoordinationScopesBy:["A"]}}],initStrategy:"auto"},s={version:"1.0.16",name:"Link controller demo",datasets:[{uid:"A",name:"My dataset",files:[{fileType:"image.ome-tiff",url:"https://data-2.vitessce.io/data/redBloodCell.ome.tiff",options:{offsetsUrl:"https://data-2.vitessce.io/data/redBloodCell.offsets.json"},coordinationValues:{fileUid:"file"}}]}],coordinationSpace:{dataset:{A:"A"}},layout:[{component:"linkController",props:{linkID:1234},x:0,y:0,w:3,h:8,coordinationScopes:{dataset:"A"}}],initStrategy:"auto"}},2571:(e,t,a)=>{a.d(t,{F:()=>p,NN:()=>o,Pq:()=>r,Qj:()=>c,TW:()=>s,UU:()=>d,re:()=>l,uK:()=>n,wn:()=>i});const o=4,i=4,s="link_id",n="https://beta-mr.vitessce.io/?url=",r="https://mr-study.vitessce.io/link?study_id=",l="https://data-2.vitessce.io/data/redBloodCell.ome.tiff",d={INVALID_STUDY_ID:"Team ID is not valid",FORBIDDEN_STUDY_ID:"Team ID is forbidden",LINK_ID_RESPONSE_ERROR:"Could not get Link Id",NO_DATASET_URL_ERROR:"No dataset URL is provided",INVALID_CONFIG:"Invalid config: LinkController missing",DATASET_LIMIT_ERROR:"Only one dataset URL is allowed"},c={BACKSPACE:"backspace",DONE:"done"},p=["1","2","3","4","5","6","7","8","9",c.BACKSPACE,"0",c.DONE]},9842:(e,t,a)=>{a.d(t,{$r:()=>s,GO:()=>d,RS:()=>r,Uc:()=>l,cr:()=>n});var o=a(1365),i=a(2571);const s=e=>{let t,a=null;try{a=(0,o.th)(JSON.parse(e)),t=!0}catch(i){t=!1,a=i.message,console.error(i)}return[t,a]},n=e=>e.split(/;/).map((e=>e.trim())).filter((e=>e.match(/^http/g))),r=(e,t)=>(1===t.length&&(e.datasets[0].files[0].url=t[0],e.datasets[0].files[0].options={offsetsUrl:t[0].split(".ome.")[0]+".offsets.json"}),e),l=async e=>{try{const t=await fetch(e);if(403===t.status)throw new Error(i.UU.FORBIDDEN_STUDY_ID);if(!t.ok)throw new Error("Could not fetch Link ID");return await t.json()}catch(t){throw t}},d=e=>fetch(e).then((e=>e.json()))}}]);